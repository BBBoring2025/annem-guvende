# docker-compose.prod.yml â€” Uretim ortami guvenlik sertlestirmesi.
# Kullanim: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
#
# Host hazirlik:
#   sudo chown -R 10001:10001 ./data ./config

services:
  annem-guvende:
    read_only: true
    tmpfs:
      - /tmp:size=10M
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    environment:
      - ANNEM_ENV=production
      - TZ=Europe/Istanbul
      - ANNEM_DASHBOARD_USERNAME=${ANNEM_DASHBOARD_USERNAME}
      - ANNEM_DASHBOARD_PASSWORD=${ANNEM_DASHBOARD_PASSWORD}
      - ANNEM_TELEGRAM_BOT_TOKEN=${ANNEM_TELEGRAM_BOT_TOKEN}
      - PYTHONDONTWRITEBYTECODE=1
    restart: unless-stopped
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"
